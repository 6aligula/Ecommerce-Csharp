@model IEnumerable<E_Commerce_App.Core.Shared.DTOs.ProductDto>
@{
    ViewData["CurrentPage"] = "Ürünler";
    ViewData["CurrentPageUrl"] = "Product";
}
@section Css{

    <style>
        .margin-10 {
            margin-top: -10px;
        }
    </style>

    @{await Html.RenderPartialAsync("_DataTableStylesPartial");}
    

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" />
    <link href="~/node_modules/toastr/build/toastr.min.css" />
    <link href="~/node_modules/sweetalert2/dist/sweetalert2.all.min.css" />
}
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">DataTable with default features</h3>
            </div>
            <div class="card-body">
                @await Html.PartialAsync("_AllProducts", Model)
            </div>
        </div>
    </div>
</div>


@section Scripts{
    @{await Html.RenderPartialAsync("_DataTableScriptsPartial");}

    <script src="~/js/demo.js"></script>

    <!-- Sweet Alert  -->
    <script src="~/node_modules/sweetalert2/dist/sweetalert2.all.min.js"></script>

    <script>
        $(document).ready(function () {
            $("#example1").DataTable({
                "responsive": true, "lengthChange": false, "autoWidth": false,
                "buttons": ["excel","csv"]
            }).buttons().container().appendTo('#example1_wrapper .col-md-6:eq(0)');
        });

        function removeProduct(id) {
            toastr.success("test");
            Swal.fire({
                title: "Silmek istediğinizden emin misiniz ?",
                text: 'Silinen veri geri kullanılamaz!',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Sil !',
                cancelButtonText: 'İptal !'
            }).then((data) => {
                console.log(data);
                try {
                    if (data.isConfirmed) {
                        $.ajax({
                            type: 'POST',
                            url: "/Admin/Product/DeleteProduct/" + id,
                            data: "{id:'" + id + "'}",
                            contentType: false,
                            processData: false,
                            success: function (res) {
                                $('#view-all').html(res.html);
                            },
                            error: function (err) {
                                console.log(err)
                            }
                        })
                    }
                } catch (ex) {
                    console.log(ex)
                }
            });
        }
    </script>
}
